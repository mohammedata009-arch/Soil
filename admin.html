<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… | Ù…. Ù…Ø­Ù…Ø¯ Ø·Ù‡ Ø¹Ø·Ø§</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --primary: #1a237e; --accent: #ffd600; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; background: var(--bg); }
        .sidebar { width: 250px; background: var(--primary); color: white; min-height: 100vh; position: fixed; right: 0; box-shadow: -2px 0 10px rgba(0,0,0,0.1); }
        .sidebar-header { padding: 30px 20px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); font-weight: bold; font-size: 1.2rem; color: var(--accent); }
        .nav-item { padding: 18px 25px; cursor: pointer; display: flex; align-items: center; gap: 15px; transition: 0.3s; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .nav-item:hover, .nav-item.active { background: rgba(255,255,255,0.1); color: var(--accent); }
        .main-content { margin-right: 250px; padding: 40px; width: 100%; }
        .admin-card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); display: none; animation: fadeIn 0.5s; }
        .admin-card.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        textarea { width: 100%; height: 100px; padding: 15px; border-radius: 12px; border: 1px solid #ddd; margin: 15px 0; resize: none; font-family: inherit; }
        .btn { padding: 12px 25px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { opacity: 0.9; transform: scale(1.02); }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="sidebar-header">ğŸ—ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØµØ©</div>
        <div class="nav-item active" onclick="showTab('tab-ads', this)">ğŸ“¢ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</div>
        <div class="nav-item" onclick="showTab('tab-notify', this)">ğŸ”” Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
        <div class="nav-item" onclick="showTab('tab-users', this)">ğŸ‘¥ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†</div>
    </div>

    <div class="main-content">
        <div id="tab-ads" class="admin-card active">
            <h2>ğŸ“¢ Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</h2>
            <p>Ø³ÙŠØ¸Ù‡Ø± Ù‡Ø°Ø§ Ø§Ù„Ù†Øµ ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø£Ø³ÙÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.</p>
            <textarea id="adInput" placeholder="Ø§ÙƒØªØ¨ Ù†Øµ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù‡Ù†Ø§..."></textarea>
            <button class="btn btn-primary" onclick="saveToFirebase('current_ad', 'adInput')">Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø¢Ù† ğŸš€</button>
        </div>

        <div id="tab-notify" class="admin-card">
            <h2>ğŸ”” Ø¥Ø´Ø¹Ø§Ø± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
            <p>Ø³ÙŠØ¸Ù‡Ø± Ù‡Ø°Ø§ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„ØºÙŠØ± Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†.</p>
            <textarea id="notifyInput" placeholder="Ø§ÙƒØªØ¨ ØªÙ†Ø¨ÙŠÙ‡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù‡Ù†Ø§..."></textarea>
            <button class="btn btn-primary" onclick="saveToFirebase('entry_notifications', 'notifyInput')">ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ ğŸ””</button>
        </div>

        <div id="tab-users" class="admin-card">
            <h2>ğŸ‘¥ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØµÙˆÙ„</h2>
            <div id="usersList" style="margin-top: 20px;">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª...</div>
        </div>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø§Ù„ØªÙŠ Ø§Ø³ØªØ®Ø±Ø¬ØªÙ‡Ø§ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø©
        const firebaseConfig = {
            apiKey: "AIzaSyAQtlovkQYAanzfBpX5cePgcXffLau-k-M",
            authDomain: "civil-engineering-platform.firebaseapp.com",
            databaseURL: "https://civil-engineering-platform-default-rtdb.firebaseio.com", 
            projectId: "civil-engineering-platform",
            storageBucket: "civil-engineering-platform.firebasestorage.app",
            messagingSenderId: "329809780930",
            appId: "1:329809780930:web:410fd497bee2c8a13c9b5b"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function showTab(id, el) {
            document.querySelectorAll('.admin-card').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            el.classList.add('active');
        }

        function saveToFirebase(path, inputId) {
            const val = document.getElementById(inputId).value;
            db.ref(path).set(val).then(() => alert("âœ… ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ù†Ø¬Ø§Ø­!"));
        }

        // Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†
        db.ref('requests').on('value', (snap) => {
            let html = "";
            snap.forEach(child => {
                const user = child.val();
                html += `
                    <div style="padding:15px; border:1px solid #eee; border-radius:10px; margin-bottom:10px; display:flex; justify-content:space-between; align-items:center;">
                        <div>
                            <strong>ğŸ‘¤ ${user.name}</strong><br>
                            <small>ğŸ“ ${user.phone}</small>
                        </div>
                        <button onclick="deleteUser('${child.key}')" style="background:#ff5252; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer;">Ø­Ø°Ù</button>
                    </div>`;
            });
            document.getElementById('usersList').innerHTML = html || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ØªÙØ¹ÙŠÙ„ Ø­Ø§Ù„ÙŠØ§Ù‹.";
        });

        function deleteUser(key) {
            if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ØŸ")) db.ref('requests/' + key).remove();
        }
    </script>
</body>
</html>

