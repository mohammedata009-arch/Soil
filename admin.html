<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ØºØ±ÙØ© Ø§Ù„ØªØ­ÙƒÙ… | Ù…. Ù…Ø­Ù…Ø¯ Ø·Ù‡</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; display: flex; }
        .sidebar { width: 280px; background: #1a237e; color: white; min-height: 100vh; padding: 20px; position: fixed; right: 0; }
        .main { margin-right: 280px; padding: 40px; width: calc(100% - 280px); }
        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); margin-bottom: 30px; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        button { background: #1a237e; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .approve-btn { background: #2ecc71; margin-left: 5px; }
        .del-btn { background: #ff5252; }
        .user-item { border-bottom: 1px solid #eee; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
    <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø´Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ù…Ø¯ Ø·Ù‡</p>
    <hr>
    <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰</p>
</div>

<div class="main">
    <div class="card">
        <h3>ğŸ“¢ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø¹Ù„ÙˆÙŠ</h3>
        <input type="text" id="adVal" placeholder="Ù†Øµ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†">
        <button onclick="updateData('current_ad', 'adVal')">ØªØ­Ø¯ÙŠØ« ğŸš€</button>
    </div>

    <div class="card">
        <h3>ğŸ”— Ø¥Ø¶Ø§ÙØ© Ø£ÙŠÙ‚ÙˆÙ†Ø©/Ø±Ø§Ø¨Ø·</h3>
        <input type="text" id="lTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø²Ø±">
        <input type="text" id="lIcon" placeholder="Ø¥ÙŠÙ…ÙˆØ¬ÙŠ (Ù…Ø«Ù„Ø§Ù‹ ğŸ—ï¸)">
        <input type="text" id="lUrl" placeholder="Ø§Ù„Ø±Ø§Ø¨Ø· (Ù…Ø«Ù„Ø§Ù‹ soil-edu.html)">
        <button onclick="addLink()">Ø¥Ø¶Ø§ÙØ© âœ…</button>
    </div>

    <div class="card">
        <h3>ğŸ‘¥ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h3>
        <div id="reqBox">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    </div>

    <div class="card" style="border-top: 5px solid #2ecc71;">
        <h3>âœ… Ø§Ù„Ù…Ø´ØªØ±ÙƒÙˆÙ† Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ÙˆÙ†</h3>
        <div id="approvedBox">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyAQtlovkQYAanzfBpX5cePgcXffLau-k-M",
        authDomain: "civil-engineering-platform.firebaseapp.com",
        databaseURL: "https://civil-engineering-platform-default-rtdb.firebaseio.com/",
        projectId: "civil-engineering-platform",
        storageBucket: "civil-engineering-platform.firebasestorage.app",
        appId: "1:329809780930:web:410fd497bee2c8a13c9b5b"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function updateData(path, id) {
        db.ref(path).set(document.getElementById(id).value).then(() => alert("ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«"));
    }

    function addLink() {
        const title = document.getElementById('lTitle').value;
        const icon = document.getElementById('lIcon').value;
        const url = document.getElementById('lUrl').value;
        if(title && url) {
            db.ref('links').push({ title, icon, url }).then(() => alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©"));
        }
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø© Ù…Ø¹ Ø²Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
    db.ref('requests').on('value', s => {
        let html = "";
        s.forEach(c => {
            const u = c.val();
            html += `<div class="user-item">
                <span><b>${u.name}</b> (${u.phone})</span>
                <div>
                    <button class="approve-btn" onclick="approveUser('${c.key}','${u.name}','${u.phone}')">Ù…ÙˆØ§ÙÙ‚Ø© âœ…</button>
                    <button class="del-btn" onclick="db.ref('requests/${c.key}').remove()">Ø­Ø°Ù âŒ</button>
                </div>
            </div>`;
        });
        document.getElementById('reqBox').innerHTML = html || "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…Ø¹Ù„Ù‚Ø©.";
    });

    function approveUser(id, name, phone) {
        db.ref('approved_users/' + phone).set({ name, phone, status: 'active' }).then(() => {
            db.ref('requests/' + id).remove();
            alert("ØªÙ… ØªÙØ¹ÙŠÙ„ Ø¹Ø¶ÙˆÙŠØ©: " + name);
        });
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ÙŠÙ† Ù…Ø¹ Ø®ÙŠØ§Ø± Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙØ¹ÙŠÙ„
    db.ref('approved_users').on('value', s => {
        let html = "";
        s.forEach(c => {
            html += `<div class="user-item">
                <span>ğŸŸ¢ ${c.val().name}</span>
                <button class="del-btn" onclick="db.ref('approved_users/${c.key}').remove()">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙØ¹ÙŠÙ„</button>
            </div>`;
        });
        document.getElementById('approvedBox').innerHTML = html || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø´ØªØ±ÙƒÙŠÙ† Ù…Ø¹ØªÙ…Ø¯ÙŠÙ†.";
    });
</script>
</body>
</html>

