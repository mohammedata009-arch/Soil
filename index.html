<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ù…. Ù…Ø­Ù…Ø¯ Ø·Ù‡ Ø¹Ø·Ø§</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --primary: #1a237e; --accent: #ffd600; }
        body { font-family: 'Segoe UI', sans-serif; background: #f4f7f6; margin: 0; text-align: center; }
        header { background: linear-gradient(135deg, var(--primary), #000051); color: white; padding: 40px; border-bottom: 5px solid var(--accent); }
        .icon-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; padding: 30px; max-width: 1000px; margin: auto; }
        .card { background: white; padding: 20px; border-radius: 15px; text-decoration: none; color: var(--primary); font-weight: bold; box-shadow: 0 4px 10px rgba(0,0,0,0.05); transition: 0.3s; }
        .card:hover { transform: translateY(-5px); background: var(--primary); color: white; }
        #authOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; }
        .auth-box { background: white; padding: 30px; border-radius: 20px; width: 320px; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
    </style>
</head>
<body>

<div id="authOverlay">
    <div class="auth-box">
        <h3>ğŸ—ï¸ Ø·Ù„Ø¨ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ©</h3>
        <input type="text" id="uName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
        <input type="text" id="uPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨">
        <button onclick="checkAccess()" style="width:100%; padding:15px; background:var(--primary); color:white; border:none; border-radius:8px; cursor:pointer;">Ø¯Ø®ÙˆÙ„ / Ø·Ù„Ø¨ ØªÙØ¹ÙŠÙ„</button>
        <p id="stMsg" style="font-size:13px; margin-top:10px; color: #d32f2f;"></p>
    </div>
</div>

<header>
    <h1>ğŸ›ï¸ Ù…Ù†ØµØ© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ®ØµØµÙŠØ©</h1>
    <p>Ù…. Ù…Ø­Ù…Ø¯ Ø·Ù‡ Ø¹Ø·Ø§ | 0999240574</p>
</header>

<div id="adBar" style="display:none; background:var(--accent); padding:10px; font-weight:bold;"></div>

<div class="icon-grid" id="mainGrid"></div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyAQtlovkQYAanzfBpX5cePgcXffLau-k-M",
        authDomain: "civil-engineering-platform.firebaseapp.com",
        databaseURL: "https://civil-engineering-platform-default-rtdb.firebaseio.com/",
        projectId: "civil-engineering-platform",
        storageBucket: "civil-engineering-platform.firebasestorage.app",
        appId: "1:329809780930:web:410fd497bee2c8a13c9b5b"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function checkAccess() {
        const name = document.getElementById('uName').value;
        const phone = document.getElementById('uPhone').value;
        if(!name || !phone) return alert("ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù‡Ù„ Ù‡Ùˆ Ù…Ø¹ØªÙ…Ø¯ØŸ
        db.ref('approved_users/' + phone).once('value', s => {
            if(s.exists()) {
                document.getElementById('authOverlay').style.display = "none";
                loadContent();
            } else {
                // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø¹ØªÙ…Ø¯Ø§Ù‹ØŒ ÙŠØ±Ø³Ù„ Ø·Ù„Ø¨ ØªÙØ¹ÙŠÙ„
                db.ref('requests/' + phone).set({ name, phone, time: new Date().toLocaleString() });
                document.getElementById('stMsg').innerText = "â³ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù†ØªØ¸Ø§Ø± ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.";
            }
        });
    }

    function loadContent() {
        db.ref('current_ad').on('value', s => {
            if(s.val()) { document.getElementById('adBar').style.display = "block"; document.getElementById('adBar').innerText = "ğŸ“¢ " + s.val(); }
        });

        db.ref('links').on('value', s => {
            const grid = document.getElementById('mainGrid');
            grid.innerHTML = "";
            s.forEach(c => {
                grid.innerHTML += `<a href="${c.val().url}" class="card"><span>${c.val().icon}</span><br>${c.val().title}</a>`;
            });
        });
    }
</script>
</body>
</html>

